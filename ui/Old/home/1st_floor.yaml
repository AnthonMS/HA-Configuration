type: vertical-stack
cards:

###########  Title  ###########
  - type: custom:button-card
    show_label: true
    label: 1st Floor
    styles:
      card:
        - height: 20px
        - border-radius: "15px"
        - background-color: "rgba(65, 65, 65,0)"
        - box-shadow: "0px 6px 7px rgba(0,0,0,0)"
      label:
        - position: absolute
        - left: 15px
        - bottom: 0px
        # - left: 45%
        # - bottom: 10px
        - text-decoration: underline
        - font-weight: bold
        - font-size: 18px
        - line-height: 20px
    tap_action:
      action: call-service
      service: frontend.reload_themes
      # service: homeassistant.turn_off
      # service_data:
      #   entity_id:
      #     - light.kitchen_spots
      #     - light.sofa_spots
      #     - light.dinner_table_spots
      #     - light.speakers


###########  Lights  ###########
  - type: horizontal-stack
    cards:
###########  LEFT MARGIN  ###########
      - type: custom:button-card
        styles:
          card:
            - width: 0px
            - height: 100px


###########  Light Kitchen Ceiling  ###########
      - type: vertical-stack
        cards:
        - type: custom:decluttering-card
          template: light_spots_button
          variables:
            - label: Kitchen
            - entity: light.kitchen_spots
      
###########  Slider Kitchen Ceiling  ###########
        - type: custom:slider-card
          entity: light.kitchen_spots
          height: '30px'
          mainSliderColor: 'rgba(255, 255, 255,0.3)'
          secondarySliderColor: 'rgba(65, 65, 65, 0)'
          thumbWidth: '10px'
          thumbHeight: '30px'
          thumbColor: 'rgba(65, 65, 65,1)'
          thumbHorizontalPadding: '4px'
          thumbVerticalPadding: '5px'
          style: |
            ha-card {
              --ha-card-background: rgba(65, 65, 65, 0.5);
            }
        
###########  Light Sofa Ceiling  ###########
      - type: vertical-stack
        cards:
        - type: custom:decluttering-card
          template: light_spots_button
          variables:
            - label: Sofa
            - entity: light.sofa_spots
      
###########  Slider Sofa Ceiling  ###########
        - type: custom:slider-card
          entity: light.sofa_spots
          height: '30px'
          mainSliderColor: 'rgba(255, 255, 255,0.3)'
          secondarySliderColor: 'rgba(65, 65, 65, 0)'
          thumbWidth: '10px'
          thumbHeight: '30px'
          thumbColor: 'rgba(65, 65, 65,1)'
          thumbHorizontalPadding: '4px'
          thumbVerticalPadding: '5px'
          style: |
            ha-card {
              --ha-card-background: rgba(65, 65, 65, 0.5);
            }
        
###########  Light Dinner Table Ceiling  ###########
      - type: vertical-stack
        cards:
        - type: custom:decluttering-card
          template: light_spots_button
          variables:
            - label: Dinner Table
            - entity: light.dinner_table_spots
      
###########  Slider Dinner Table Ceiling  ###########
        - type: custom:slider-card
          entity: light.dinner_table_spots
          height: '30px'
          mainSliderColor: 'rgba(255, 255, 255,0.3)'
          secondarySliderColor: 'rgba(65, 65, 65, 0)'
          thumbWidth: '10px'
          thumbHeight: '30px'
          thumbColor: 'rgba(65, 65, 65,1)'
          thumbHorizontalPadding: '4px'
          thumbVerticalPadding: '5px'
          style: |
            ha-card {
              --ha-card-background: rgba(65, 65, 65, 0.5);
            }
        
###########  Light Entrance Spots  ###########
      - type: vertical-stack
        cards:
        - type: custom:decluttering-card
          template: light_spots_button
          variables:
            - label: Entrance
            - entity: light.entrance_spots
      
###########  Slider Entrance Spots  ###########
        - type: custom:slider-card
          entity: light.entrance_spots
          height: '30px'
          mainSliderColor: 'rgba(255, 255, 255,0.3)'
          secondarySliderColor: 'rgba(65, 65, 65, 0)'
          thumbWidth: '10px'
          thumbHeight: '30px'
          thumbColor: 'rgba(65, 65, 65,1)'
          thumbHorizontalPadding: '4px'
          thumbVerticalPadding: '5px'
          style: |
            ha-card {
              --ha-card-background: rgba(65, 65, 65, 0.5);
            }

###########  RIGHT MARGIN  ###########
      - type: custom:button-card
        styles:
          card:
            - width: 0px
            - height: 100px


###########  Lights  ###########
  - type: horizontal-stack
    cards:
###########  LEFT MARGIN  ###########
      - type: custom:button-card
        styles:
          card:
            - width: 0px
            - height: 100px
        
###########  Lock Front Door  ###########
      - type: vertical-stack
        cards:
        - type: custom:button-card
          entity: alarm_control_panel.home_alarm
          label: Lock
          icon: >
            [[[
              if (states["lock.front_door"].state == "unlocked") return "mdi:lock-open-variant-outline";
              else return "mdi:lock-outline";
            ]]]
          show_state: false
          show_name: false
          show_label: true
          styles:
            card:
              - height: 100px
              - border-radius: 15px
              - background-color: >
                  [[[
                    if (states["lock.front_door"].state == "unlocked") return "rgba(65, 65, 65,0.5)";
                    else return "rgba(255, 255, 255,0.3)";
                  ]]]
            icon:
              - color: >
                  [[[
                    if (states["lock.front_door"].state == "unlocked") return "rgba(88, 88, 88, 1)";
                    else return "rgba(255, 255, 255, 1)";
                  ]]]
            custom_fields:
              notification:
                - background-color: "transparent"
                - position: absolute
                - left: 60%
                - top: 10%
                - height: 20px
                - width: 20px
          custom_fields:
            notification: >
              [[[ 
                if (states["alarm_control_panel.home_alarm"].state == "disarmed") 
                  return `<ha-icon 
                            icon="mdi:alarm-light" 
                            style="width: 17px; height: 17px; color: green;">
                          </ha-icon>`;
                else if (states["alarm_control_panel.home_alarm"].state == "arming") 
                  return `<ha-icon 
                            icon="mdi:alarm-light" 
                            style="width: 17px; height: 17px; color: yellow;">
                          </ha-icon>`;
                else if (states["alarm_control_panel.home_alarm"].state == "pending") 
                  return `<ha-icon 
                            icon="mdi:alarm-light" 
                            style="width: 17px; height: 17px; color: yellow;">
                          </ha-icon>`;
                else if (states["alarm_control_panel.home_alarm"].state == "armed_away") 
                  return `<ha-icon 
                            icon="mdi:alarm-light" 
                            style="width: 17px; height: 17px; color: red;">
                          </ha-icon>`;
                else if (states["alarm_control_panel.home_alarm"].state == "triggered") 
                  return `<ha-icon 
                            icon="mdi:alarm-light" 
                            style="width: 17px; height: 17px; color: purple;">
                          </ha-icon>`;
                else return "?";
              ]]]
          tap_action:
            action: call-service
            service: script.lock_button
          hold_action:
            action: more-info
        



###########  Television  ###########
      - type: vertical-stack
        cards:
          - type: custom:button-card
            label: Television
            entity_picture: >
              [[[
                if (states["media_player.living_room_tv"].state == "off") return "/local/images/floorplan/custom_icons/television-off.png";
                else if (states["media_player.living_room_tv"].state == "unavailable") return "/local/images/floorplan/custom_icons/television-off.png";
                else if (states["media_player.living_room_tv"].attributes.app_id == "org.droidtv.nettvbrowser") return "/local/images/floorplan/custom_icons/television-tv2.png";
                else if (states["media_player.living_room_tv"].attributes.app_id == "com.netflix.ninja") return "/local/images/floorplan/custom_icons/television-netflix.png";
                else if (states["media_player.living_room_tv"].attributes.app_id == "com.google.android.youtube.tv") return "/local/images/floorplan/custom_icons/television-youtube.png";
                else if (states["media_player.living_room_tv"].attributes.app_id == "org.videolan.vlc") return "/local/images/floorplan/custom_icons/television-vlc.png";
                else if (states["media_player.living_room_tv"].attributes.app_id == "dk.dr.tvplayer") return "/local/images/floorplan/custom_icons/television-dr.png";
                else if (states["media_player.living_room_tv"].attributes.app_id == "com.hbo_android_tv") return "/local/images/floorplan/custom_icons/television-hbo.png";
                else if (states["media_player.living_room_tv"].attributes.app_id == "com.viaplay.android") return "/local/images/floorplan/custom_icons/television-viaplay.png";
                else if (states["media_player.living_room_tv"].attributes.app_id == "com.disney.disneyplus") return "/local/images/floorplan/custom_icons/television-disney.png";
                else return "/local/images/floorplan/custom_icons/television.png";
              ]]]
            show_entity_picture: true
            show_state: false
            show_name: false
            show_label: true
            styles:
              card:
                - height: 100px
                - border-radius: 15px
                - background-color: >
                    [[[
                      if (states["media_player.living_room_tv"].state == "off") return "rgba(65, 65, 65,0.5)";
                      else if (states["media_player.living_room_tv"].state == "unavailable") return "rgba(65, 65, 65,0.5)";
                      else return "rgba(255, 255, 255,0.3)";
                    ]]]
            tap_action:
              action: call-service
              service: browser_mod.popup
              service_data:
                hide_header: true
                title: Television
                card: !include ../popups/television_living_room.yaml
                deviceID:
                  - this
                  
###########  Slider Living Room TV  ###########
          - type: custom:slider-card
            entity: media_player.living_room_tv
            height: '30px'
            mainSliderColor: 'rgba(255, 255, 255,0.3)'
            secondarySliderColor: 'rgba(65, 65, 65, 0)'
            thumbWidth: '10px'
            thumbHeight: '30px'
            thumbColor: 'rgba(65, 65, 65,1)'
            thumbHorizontalPadding: '4px'
            thumbVerticalPadding: '5px'
            style: |
              ha-card {
                --ha-card-background: rgba(65, 65, 65, 0.5);
              }
        
        
###########  Light Speakers  ###########
      - type: vertical-stack
        cards:
        - type: custom:button-card
          entity: light.speakers
          label: Speakers
          icon: mdi:lamp
          show_state: false
          show_name: false
          show_label: true
          styles:
            card:
              - height: 100px
              - border-radius: 15px
              - background-color: >
                  [[[
                    if (entity.state == "off") return "rgba(65, 65, 65,0.5)";
                    else return "rgba(255, 255, 255,0.3)";
                  ]]]
            icon:
              - color: >
                  [[[
                    if (entity.state == "on")
                      return "rgb(" + entity.attributes.rgb_color[0] + ", " + entity.attributes.rgb_color[1] + ", " + entity.attributes.rgb_color[2] + ")";
                    else
                      return "rgb(88, 88, 88)";
                  ]]]
            custom_fields:
              notification:
                - background-color: "white"
                - border-radius: 50%
                - position: absolute
                - left: 60%
                - top: 10%
                - height: 20px
                - width: 20px
                - font-size: 8px
                - color: "black"
                - font-weight: bold
                - line-height: 20px
          custom_fields:
            notification: >
              [[[ 
                if (entity.state == "on") return Math.round(entity.attributes.brightness/2.55);
              ]]]
          tap_action:
            action: toggle
          hold_action:
            action: more-info

            # icon:
            #   - color: >
            #       [[[
            #         if (entity.state == "on")
            #           if (entity.attributes.rgb_color)
            #             return "rgb(" + entity.attributes.rgb_color[0] + ", " + entity.attributes.rgb_color[1] + ", " + entity.attributes.rgb_color[2] + ")";
            #           else
            #             return "rgb(255, 255, 255)";
            #         else
            #           return "rgb(88, 88, 88)";
            #       ]]]

###########  Slider Speakers  ###########
        - type: custom:slider-card
          entity: light.speakers
          height: '30px'
          mainSliderColor: 'rgba(255, 255, 255,0.3)'
          secondarySliderColor: 'rgba(65, 65, 65, 0)'
          thumbWidth: '10px'
          thumbHeight: '30px'
          thumbColor: 'rgba(65, 65, 65,1)'
          thumbHorizontalPadding: '4px'
          thumbVerticalPadding: '5px'
          style: |
            ha-card {
              --ha-card-background: rgba(65, 65, 65, 0.5);
            }

###########  Speakers Living Room  ###########
      - type: vertical-stack
        cards:
          - type: custom:button-card
            entity: media_player.living_room_speakers
            label: Speakers
            icon: mdi:speaker
            show_state: false
            show_name: false
            show_label: true
            styles:
              card:
                - height: 100px
                - border-radius: 15px
                - background-color: >
                    [[[
                      if (states["media_player.living_room_speakers"].state == "idle") return "rgba(65, 65, 65,0.5)";
                      else if (states["media_player.living_room_speakers"].state == "paused") return "rgba(65, 65, 65,0.5)";
                      else if (states["media_player.living_room_speakers"].state == "unavailable") return "rgba(65, 65, 65,0.5)";
                      else return "rgba(255, 255, 255,0.3)";
                    ]]]
              icon:
                - color: >
                    [[[
                      if (states["media_player.living_room_speakers"].state == "idle") return "rgba(88, 88, 88, 1)";
                      else if (states["media_player.living_room_speakers"].state == "paused") return "rgba(88, 88, 88, 1)";
                      else if (states["media_player.living_room_speakers"].state == "unavailable") return "rgba(88, 88, 88, 1)";
                      else return "rgba(255, 255, 255, 1)";
                    ]]]
            tap_action:
              action: more-info
      
###########  Slider Living Room Speakers  ###########
          - type: custom:slider-card
            entity: media_player.living_room_speakers
            height: '30px'
            mainSliderColor: 'rgba(255, 255, 255,0.3)'
            secondarySliderColor: 'rgba(65, 65, 65, 0)'
            thumbWidth: '10px'
            thumbHeight: '30px'
            thumbColor: 'rgba(65, 65, 65,1)'
            thumbHorizontalPadding: '4px'
            thumbVerticalPadding: '5px'
            style: |
              ha-card {
                --ha-card-background: rgba(65, 65, 65, 0.5);
              }

###########  RIGHT MARGIN  ###########
      - type: custom:button-card
        styles:
          card:
            - width: 0px
            - height: 100px